{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"hack-igniter A example project extends of CodeIgniter v3.x https://azhai.gitbook.io/hack-igniter/ \u5b89\u88c5 \u8981\u6c42php v5.4\u53ca\u4ee5\u4e0a\u7248\u672c\u3002 \u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u4ee3\u7801\uff0c\u89e3\u538b\u5e76\u8fdb\u5165\u76ee\u5f55\u3002 \u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff08\u9700\u8981\u5b89\u88c5\u6709 composer \uff09\uff0c\u5b89\u88c5\u4f9d\u8d56\u5305\u548c\u5f00\u53d1\u4f9d\u8d56\u5305\u3002 composer install \u914d\u7f6e \u5f00\u53d1\u73af\u5883\u7684\u914d\u7f6e\u4f9d\u7136\u5728 application/config/development \u4e0b \u7b2c\u4e00\u6b21\u52a1\u5fc5\u4fee\u6539 constants.php \u4e2d\u7684\u7f51\u5740\u548c database.php \u4e2d\u7684\u6570\u636e\u5e93\u8fde\u63a5 \u751f\u6210Model \u8bbe\u7f6e\u597d\u6570\u636e\u5e93\u8fde\u63a5\u540e\uff0c\u56de\u5230\u5b89\u88c5\u76ee\u5f55\uff08\u5373 application \u518d\u5f80\u4e0a\u4e00\u5c42\u76ee\u5f55\uff09\uff0c\u6267\u884c php index.php gen model #\u751f\u6210Model\u6587\u4ef6 php index.php gen fake #\u5199\u5165\u6f14\u793a\u6570\u636e \u81ea\u52a8\u751f\u6210\u6240\u6709\u8868\u7684 Model \u6587\u4ef6\uff0c\u653e\u5165\u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u540d\u7684\u5b50\u76ee\u5f55\u4e2d\uff0c\u5e76\u4e14\u5173\u8054\u5bf9\u5e94 Mixin \u3002 \u63a7\u5236\u5668\u6d41\u7a0b \u6309\u7167 CodeIgniter \u89c4\u8303\uff0c\u8bbf\u95ee\u7f51\u5740\u4f1a\u88ab\u5bf9\u5e94\u5230\u201c\u6a21\u5757/\u63a7\u5236\u5668/\u65b9\u6cd5\u201d\u4e0a\uff0c\u4f46\u5982\u679c\u63a7\u5236\u4e2d\u542b\u6709 _remap() \u65b9\u6cd5\uff0c\u5219\u76f4\u63a5\u6267\u884c\u5b83\u3002 \u6211\u4eec\u5728\u57fa\u7840\u63a7\u5236\u5668 application/core/MY_Controller.php \u4e2d\uff0c\u653e\u7f6e\u4e00\u4e2a _remap() \uff0c \u5b83\u7684\u6d41\u7a0b\u662f\u8fd9\u6837\uff1a \u6bcf\u4e2a\u63a7\u5236\u6709\u4e2a context \u7684\u5c5e\u6027\uff0c\u7c7b\u578b\u4e3a array \u3002 \u5982\u679c\u5bf9\u5e94\u7684\u65b9\u6cd5\u662f\u79c1\u6709\u6216\u8005\u4fdd\u62a4\u65b9\u6cd5\uff0c\u76f4\u63a5\u8fd4\u56de 404 \u9519\u8bef\uff0c\u5f53\u524d\u8bf7\u6c42\u7ed3\u675f\u3002 \u9996\u5148\u6267\u884c initialize() \u65b9\u6cd5\uff0c\u8fd4\u56de\u7ed3\u679c\u4f5c\u4e3a context \u4e00\u90e8\u5206\u3002\u540c\u65f6\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u83b7\u53d6\u4e0eURL\u76f8\u5173\u7684\u5c5e\u6027\uff0c\u6216\u68c0\u67e5\u5f53\u524d\u7528\u6237\u7684\u6743\u9650\u3002 \u63a5\u7740\u6267\u884c\u7f51\u5740\u4e2d\u5bf9\u5e94\u7684\u516c\u5f00\u65b9\u6cd5\uff0c\u67e5\u8be2\u6570\u636e\u5e93\u7b49\u64cd\u4f5c\u5728\u8fd9\u91cc\u5b9e\u73b0\uff0c\u5176\u7ed3\u679c\u4e5f\u662f context \u7684\u4e00\u90e8\u5206\u3002 \u6700\u540e\u6267\u884c finalize(\uff09\u8f93\u51fa\uff0c\u4f1a\u5148\u627e\u5230\u5bf9\u5e94\u6a21\u677f\u6587\u4ef6\uff0c\u518d\u7528 context \u4e2d\u6570\u636e\u6e32\u67d3\u6a21\u677f\u3002 \u8fdb\u4e00\u6b65\u9605\u8bfb \u67e5\u770b\u5176\u4ed6 \u5feb\u901f\u5165\u95e8","title":"Home"},{"location":"#hack-igniter","text":"A example project extends of CodeIgniter v3.x https://azhai.gitbook.io/hack-igniter/","title":"hack-igniter"},{"location":"#_1","text":"\u8981\u6c42php v5.4\u53ca\u4ee5\u4e0a\u7248\u672c\u3002 \u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u4ee3\u7801\uff0c\u89e3\u538b\u5e76\u8fdb\u5165\u76ee\u5f55\u3002 \u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff08\u9700\u8981\u5b89\u88c5\u6709 composer \uff09\uff0c\u5b89\u88c5\u4f9d\u8d56\u5305\u548c\u5f00\u53d1\u4f9d\u8d56\u5305\u3002 composer install","title":"\u5b89\u88c5"},{"location":"#_2","text":"\u5f00\u53d1\u73af\u5883\u7684\u914d\u7f6e\u4f9d\u7136\u5728 application/config/development \u4e0b \u7b2c\u4e00\u6b21\u52a1\u5fc5\u4fee\u6539 constants.php \u4e2d\u7684\u7f51\u5740\u548c database.php \u4e2d\u7684\u6570\u636e\u5e93\u8fde\u63a5","title":"\u914d\u7f6e"},{"location":"#model","text":"\u8bbe\u7f6e\u597d\u6570\u636e\u5e93\u8fde\u63a5\u540e\uff0c\u56de\u5230\u5b89\u88c5\u76ee\u5f55\uff08\u5373 application \u518d\u5f80\u4e0a\u4e00\u5c42\u76ee\u5f55\uff09\uff0c\u6267\u884c php index.php gen model #\u751f\u6210Model\u6587\u4ef6 php index.php gen fake #\u5199\u5165\u6f14\u793a\u6570\u636e \u81ea\u52a8\u751f\u6210\u6240\u6709\u8868\u7684 Model \u6587\u4ef6\uff0c\u653e\u5165\u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u540d\u7684\u5b50\u76ee\u5f55\u4e2d\uff0c\u5e76\u4e14\u5173\u8054\u5bf9\u5e94 Mixin \u3002","title":"\u751f\u6210Model"},{"location":"#_3","text":"\u6309\u7167 CodeIgniter \u89c4\u8303\uff0c\u8bbf\u95ee\u7f51\u5740\u4f1a\u88ab\u5bf9\u5e94\u5230\u201c\u6a21\u5757/\u63a7\u5236\u5668/\u65b9\u6cd5\u201d\u4e0a\uff0c\u4f46\u5982\u679c\u63a7\u5236\u4e2d\u542b\u6709 _remap() \u65b9\u6cd5\uff0c\u5219\u76f4\u63a5\u6267\u884c\u5b83\u3002 \u6211\u4eec\u5728\u57fa\u7840\u63a7\u5236\u5668 application/core/MY_Controller.php \u4e2d\uff0c\u653e\u7f6e\u4e00\u4e2a _remap() \uff0c \u5b83\u7684\u6d41\u7a0b\u662f\u8fd9\u6837\uff1a \u6bcf\u4e2a\u63a7\u5236\u6709\u4e2a context \u7684\u5c5e\u6027\uff0c\u7c7b\u578b\u4e3a array \u3002 \u5982\u679c\u5bf9\u5e94\u7684\u65b9\u6cd5\u662f\u79c1\u6709\u6216\u8005\u4fdd\u62a4\u65b9\u6cd5\uff0c\u76f4\u63a5\u8fd4\u56de 404 \u9519\u8bef\uff0c\u5f53\u524d\u8bf7\u6c42\u7ed3\u675f\u3002 \u9996\u5148\u6267\u884c initialize() \u65b9\u6cd5\uff0c\u8fd4\u56de\u7ed3\u679c\u4f5c\u4e3a context \u4e00\u90e8\u5206\u3002\u540c\u65f6\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u83b7\u53d6\u4e0eURL\u76f8\u5173\u7684\u5c5e\u6027\uff0c\u6216\u68c0\u67e5\u5f53\u524d\u7528\u6237\u7684\u6743\u9650\u3002 \u63a5\u7740\u6267\u884c\u7f51\u5740\u4e2d\u5bf9\u5e94\u7684\u516c\u5f00\u65b9\u6cd5\uff0c\u67e5\u8be2\u6570\u636e\u5e93\u7b49\u64cd\u4f5c\u5728\u8fd9\u91cc\u5b9e\u73b0\uff0c\u5176\u7ed3\u679c\u4e5f\u662f context \u7684\u4e00\u90e8\u5206\u3002 \u6700\u540e\u6267\u884c finalize(\uff09\u8f93\u51fa\uff0c\u4f1a\u5148\u627e\u5230\u5bf9\u5e94\u6a21\u677f\u6587\u4ef6\uff0c\u518d\u7528 context \u4e2d\u6570\u636e\u6e32\u67d3\u6a21\u677f\u3002","title":"\u63a7\u5236\u5668\u6d41\u7a0b"},{"location":"#_4","text":"\u67e5\u770b\u5176\u4ed6 \u5feb\u901f\u5165\u95e8","title":"\u8fdb\u4e00\u6b65\u9605\u8bfb"},{"location":"quick_start/","text":"hack-igniter A example project extends of CodeIgniter v3.x \u5b89\u88c5 \u8981\u6c42php v5.4\u53ca\u4ee5\u4e0a\u7248\u672c\u3002 \u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u4ee3\u7801\uff0c\u89e3\u538b\u5e76\u8fdb\u5165\u76ee\u5f55\u3002 \u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff08\u9700\u8981\u5b89\u88c5\u6709 composer \uff09\uff0c\u5b89\u88c5\u4f9d\u8d56\u5305\u548c\u5f00\u53d1\u4f9d\u8d56\u5305\u3002 composer install \u76ee\u5f55\u7ed3\u6784 \u5bf9 CodeIgniter \u7684\u76ee\u5f55\u7a0d\u4f5c\u6539\u52a8\u3002 \u5728 application/controllers \u5206\u6210\u591a\u4e2a\u5b50\u76ee\u5f55\uff0c\u6bcf\u4e2a\u5b50\u76ee\u5f55\u662f\u4e00\u4e2a\u6a21\u5757\u3002 \u5b50\u76ee\u5f55\u4e0b\u662f\u63a7\u5236\u5668\u548c\u5b83\u4eec\u7684\u6a21\u677f\uff0c\u6240\u6709\u63a7\u5236\u5668\u540d\u79f0\u3001\u6587\u4ef6\uff08\u4e0d\u542b\u6269\u5c55\u540d\uff09\u90fd\u4ee5 _page \u7ed3\u5c3e\u3002 application \u4e0d\u518d\u6709 views \u76ee\u5f55\uff0c\u53ea\u6709 themes \u76ee\u5f55\uff0c\u5b58\u653e\u6a21\u677f\u7684\u516c\u5171\u5e03\u5c40\u6587\u4ef6\u3002 |--- applictaion/ #\u4ee3\u7801\u6587\u4ef6\u5939 | |--- cache/ #\u7f13\u5b58\u6587\u4ef6 | |--- config/ #\u9879\u76ee\u76f8\u5173\u7684\u914d\u7f6e | | |--- autoload.php | | |--- constants.php | | |--- development/ | | | |--- config.php | | | |--- constants.php | | | |--- database.php | | | |--- redis.php | | | |--- routes.php | | |--- hooks.php | | |--- migration.php | | |--- mimes.php | | |--- profiler.php | |--- controllers/ #\u4e3b\u76ee\u5f55 | | |--- home/ #\u6a21\u5757 | | |--- views/ #\u89c6\u56fe\u76ee\u5f55 | | | |--- index/ | | | |--- index.php | | |--- Index_page.php #\u63a7\u5236\u5668 | |--- core/ #\u6838\u5fc3\u7a0b\u5e8f | |--- helpers/ #\u8f85\u52a9\u51fd\u6570 | |--- language/ #\u8bed\u8a00\u5305 | |--- libraries/ #\u7b2c\u4e09\u65b9\u7c7b\u5e93 | |--- logs/ #\u65e5\u5fd7 | |--- models/ #\u6a21\u578b\u76ee\u5f55 | | |--- default/ #\u6309\u6570\u636e\u5e93\u8fde\u63a5\u540d\u5206\u5f00\uff0c\u81ea\u52a8\u751f\u6210Model\u6587\u4ef6 | | |--- fakes/ #\u4e3aModel\u521b\u5efa\u6f14\u793a\u6570\u636e | | | |--- User_fake.php | | |--- mixins/ #\u9644\u52a0\u5230Model\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u5916\u952e\u3001\u7f13\u5b58 | | |--- User_mixin.php | |--- themes/ #\u4e3b\u9898\u76ee\u5f55 | |--- default/ | |--- errors/ | | |--- error_404.php #404\u6a21\u677f | |--- layout.php #\u6a21\u677f\u5e03\u5c40 |--- static/ #\u9759\u6001\u6587\u4ef6 |--- composer.json #\u4f9d\u8d56\u7ba1\u7406\u7684\u914d\u7f6e\u6587\u4ef6 |--- ctl.sh #\u5b88\u62a4\u8fdb\u7a0b\u63a7\u5236\u811a\u672c |--- index.php #\u5165\u53e3\u6587\u4ef6 \u914d\u7f6e \u5f00\u53d1\u73af\u5883\u7684\u914d\u7f6e\u4f9d\u7136\u5728 application/config/development \u4e0b \u7b2c\u4e00\u6b21\u52a1\u5fc5\u4fee\u6539 constants.php \u4e2d\u7684\u7f51\u5740\u548c database.php \u4e2d\u7684\u6570\u636e\u5e93\u8fde\u63a5 \u751f\u6210Model \u8bbe\u7f6e\u597d\u6570\u636e\u5e93\u8fde\u63a5\u540e\uff0c\u56de\u5230\u5b89\u88c5\u76ee\u5f55\uff08\u5373 application \u518d\u5f80\u4e0a\u4e00\u5c42\u76ee\u5f55\uff09\uff0c\u6267\u884c php index.php gen model #\u751f\u6210Model\u6587\u4ef6 php index.php gen fake #\u5199\u5165\u6f14\u793a\u6570\u636e \u81ea\u52a8\u751f\u6210\u6240\u6709\u8868\u7684 Model \u6587\u4ef6\uff0c\u653e\u5165\u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u540d\u7684\u5b50\u76ee\u5f55\u4e2d\uff0c\u5e76\u4e14\u5173\u8054\u5bf9\u5e94 Mixin \u3002 \u63a7\u5236\u5668\u6d41\u7a0b \u6309\u7167 CodeIgniter \u89c4\u8303\uff0c\u8bbf\u95ee\u7f51\u5740\u4f1a\u88ab\u5bf9\u5e94\u5230\u201c\u6a21\u5757/\u63a7\u5236\u5668/\u65b9\u6cd5\u201d\u4e0a\uff0c\u4f46\u5982\u679c\u63a7\u5236\u4e2d\u542b\u6709 _remap() \u65b9\u6cd5\uff0c\u5219\u76f4\u63a5\u6267\u884c\u5b83\u3002 \u6211\u4eec\u5728\u57fa\u7840\u63a7\u5236\u5668 application/core/MY_Controller.php \u4e2d\uff0c\u653e\u7f6e\u4e00\u4e2a _remap() \uff0c \u5b83\u7684\u6d41\u7a0b\u662f\u8fd9\u6837\uff1a \u6bcf\u4e2a\u63a7\u5236\u6709\u4e2a context \u7684\u5c5e\u6027\uff0c\u7c7b\u578b\u4e3a array \u3002 \u5982\u679c\u5bf9\u5e94\u7684\u65b9\u6cd5\u662f\u79c1\u6709\u6216\u8005\u4fdd\u62a4\u65b9\u6cd5\uff0c\u76f4\u63a5\u8fd4\u56de 404 \u9519\u8bef\uff0c\u5f53\u524d\u8bf7\u6c42\u7ed3\u675f\u3002 \u9996\u5148\u6267\u884c initialize() \u65b9\u6cd5\uff0c\u8fd4\u56de\u7ed3\u679c\u4f5c\u4e3a context \u4e00\u90e8\u5206\u3002\u540c\u65f6\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u83b7\u53d6\u4e0eURL\u76f8\u5173\u7684\u5c5e\u6027\uff0c\u6216\u68c0\u67e5\u5f53\u524d\u7528\u6237\u7684\u6743\u9650\u3002 \u63a5\u7740\u6267\u884c\u7f51\u5740\u4e2d\u5bf9\u5e94\u7684\u516c\u5f00\u65b9\u6cd5\uff0c\u67e5\u8be2\u6570\u636e\u5e93\u7b49\u64cd\u4f5c\u5728\u8fd9\u91cc\u5b9e\u73b0\uff0c\u5176\u7ed3\u679c\u4e5f\u662f context \u7684\u4e00\u90e8\u5206\u3002 \u6700\u540e\u6267\u884c finalize(\uff09\u8f93\u51fa\uff0c\u4f1a\u5148\u627e\u5230\u5bf9\u5e94\u6a21\u677f\u6587\u4ef6\uff0c\u518d\u7528 context \u4e2d\u6570\u636e\u6e32\u67d3\u6a21\u677f\u3002 \u5173\u8054\u67e5\u8be2 \u5728 application/controllers \u4e2d\u52a0\u5165 demo \u5b50\u76ee\u5f55\u6765\u6d4b\u8bd5 \u521b\u5efa demo/Index_page.php \u6587\u4ef6 <?php defined ( 'BASEPATH' ) or exit ( 'No direct script access allowed' ); /** * \u6f14\u793a\u6a21\u5757\u7684\u9996\u9875\u63a7\u5236\u5668 */ class Index_page extends MY_Controller { public function index () { //\u4ee5 User \u548c Role \u4e3a\u4f8b $this -> load -> model ( 'default/user_model' ); $this -> load -> model ( 'default/role_model' ); $this -> user_model -> with_foreign ( 'role' ); $this -> user_model -> where ( 'role_id >' , 0 ); //\u81ea\u52a8\u4e3a\u6bcf\u4e2a user \u5e26\u4e0a role \u6210\u5458 $users = $this -> user_model -> all ( 5 ); if ( count ( $users ) > 0 ) { var_export ( $users [ 0 ]); var_export ( $users [ 0 ][ 'role' ]); } exit (); //\u7ed3\u675f\uff0c\u5426\u5219\u4f1a\u53bb\u6e32\u67d3\u5bf9\u5e94\u6a21\u677f } } \u5f53\u7136\u4e8b\u5148\u9700\u8981\u8bbe\u7f6e\u597d application/models/mixins/User_Mixin.php \u6587\u4ef6\uff0c \u8bbe\u7f6e\u597d\u4e0a\u9762\u6587\u4ef6\u540e\uff0c\u8981\u5220\u9664 User_model.php \u6587\u4ef6\uff0c\u7136\u540e\u7528 gen model \u547d\u4ee4\u91cd\u65b0\u751f\u6210\u3002 defined('BASEPATH') or exit('No direct script access allowed'); /** * \u7cfb\u7edf\u7528\u6237 */ trait User_mixin { use \\Mylib\\ORM\\MY_Foreign; public function get_relations() { return [ 'role' => [ //'type' => FOREIGN_BELONGS_TO, //\u53ef\u7701\u7565 'model' => 'default/role_model', ], ]; } } \u5bf9\u4e8e\u4e0a\u9762\u7684\u67e5\u8be2\u6765\u8bf4 Role_Mixin.php \u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u4e0d\u8fc7\u53cd\u5411\u7684\u5173\u8054\u9700\u8981\u3002 defined('BASEPATH') or exit('No direct script access allowed'); /** * \u7cfb\u7edf\u89d2\u8272 */ trait Role_mixin { use \\Mylib\\ORM\\MY_Foreign; public function get_relations() { return [ 'users' => [ //\u4e00\u5bf9\u591a\u5173\u8054 'type' => FOREIGN_HAS_MANY, 'model' => 'default/user_model', 'rev_name' => 'role', 'fkey' => 'role_id', ], 'privileges' => [ //\u591a\u5bf9\u591a\u5173\u8054 'type' => FOREIGN_MANY_TO_MANY, 'model' => 'default/privilege_model', 'rev_name' => 'roles', 'fkey' => 'role_id', 'another_fkey' => 'privilege_id', 'middle_model' => 'default/role_privilege_model', ], ]; } } \u7279\u6b8a\u7684\u81ea\u5173\u8054\uff0c\u5373\u6709\u4e9b\u884c\u662f\u53e6\u4e00\u4e9b\u884c\u7684 parent \uff0c\u7528\u7279\u6b8a\u5e38\u91cf\u4ee3\u66ff\u81ea\u8eab\u7684 Model \u540d\u3002 defined('BASEPATH') or exit('No direct script access allowed'); /** * \u540e\u53f0\u83dc\u5355 */ trait Menu_mixin { use \\Mylib\\ORM\\MY_Foreign; public function get_relations() { return [ 'parent' => [ 'model' => FOREIGN_SELF_MODEL, ], 'children' => [ 'type' => FOREIGN_HAS_MANY, 'model' => FOREIGN_SELF_MODEL, 'rev_name' => 'parent', 'fkey' => 'parent_id', ], ]; } } \u6570\u636e\u7f13\u5b58 \u4f7f\u7528 Model \u5230 redis \u7684\u7f13\u5b58\uff0c\u901a\u5e38\u662f hash \u6570\u636e\u7ed3\u6784\u3002 defined('BASEPATH') or exit('No direct script access allowed'); /** * \u7cfb\u7edf\u7528\u6237 */ trait User_mixin { use \\Mylib\\ORM\\MY_Cacheable; use \\Mylib\\ORM\\MY_Cache_Hash; use \\Mylib\\ORM\\MY_Foreign; public function __construct() { parent::__construct(); $this->add_cache('redis', 'admin'); } public function get_relations() { return [ 'role' => [ //'type' => FOREIGN_BELONGS_TO, //\u53ef\u7701\u7565 'model' => 'default/role_model', ], ]; } public function cache_type() { return 'hash'; } public function cache_key($condition) { return 'user:' . $condition['username']; } } \u6811\u72b6\u7ed3\u6784\uff0c\u591a\u7ea7\u5206\u7c7b \u6309\u6708\u5206\u8868 \u6a21\u677f","title":"Quick Start"},{"location":"quick_start/#hack-igniter","text":"A example project extends of CodeIgniter v3.x","title":"hack-igniter"},{"location":"quick_start/#_1","text":"\u8981\u6c42php v5.4\u53ca\u4ee5\u4e0a\u7248\u672c\u3002 \u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u4ee3\u7801\uff0c\u89e3\u538b\u5e76\u8fdb\u5165\u76ee\u5f55\u3002 \u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff08\u9700\u8981\u5b89\u88c5\u6709 composer \uff09\uff0c\u5b89\u88c5\u4f9d\u8d56\u5305\u548c\u5f00\u53d1\u4f9d\u8d56\u5305\u3002 composer install","title":"\u5b89\u88c5"},{"location":"quick_start/#_2","text":"\u5bf9 CodeIgniter \u7684\u76ee\u5f55\u7a0d\u4f5c\u6539\u52a8\u3002 \u5728 application/controllers \u5206\u6210\u591a\u4e2a\u5b50\u76ee\u5f55\uff0c\u6bcf\u4e2a\u5b50\u76ee\u5f55\u662f\u4e00\u4e2a\u6a21\u5757\u3002 \u5b50\u76ee\u5f55\u4e0b\u662f\u63a7\u5236\u5668\u548c\u5b83\u4eec\u7684\u6a21\u677f\uff0c\u6240\u6709\u63a7\u5236\u5668\u540d\u79f0\u3001\u6587\u4ef6\uff08\u4e0d\u542b\u6269\u5c55\u540d\uff09\u90fd\u4ee5 _page \u7ed3\u5c3e\u3002 application \u4e0d\u518d\u6709 views \u76ee\u5f55\uff0c\u53ea\u6709 themes \u76ee\u5f55\uff0c\u5b58\u653e\u6a21\u677f\u7684\u516c\u5171\u5e03\u5c40\u6587\u4ef6\u3002 |--- applictaion/ #\u4ee3\u7801\u6587\u4ef6\u5939 | |--- cache/ #\u7f13\u5b58\u6587\u4ef6 | |--- config/ #\u9879\u76ee\u76f8\u5173\u7684\u914d\u7f6e | | |--- autoload.php | | |--- constants.php | | |--- development/ | | | |--- config.php | | | |--- constants.php | | | |--- database.php | | | |--- redis.php | | | |--- routes.php | | |--- hooks.php | | |--- migration.php | | |--- mimes.php | | |--- profiler.php | |--- controllers/ #\u4e3b\u76ee\u5f55 | | |--- home/ #\u6a21\u5757 | | |--- views/ #\u89c6\u56fe\u76ee\u5f55 | | | |--- index/ | | | |--- index.php | | |--- Index_page.php #\u63a7\u5236\u5668 | |--- core/ #\u6838\u5fc3\u7a0b\u5e8f | |--- helpers/ #\u8f85\u52a9\u51fd\u6570 | |--- language/ #\u8bed\u8a00\u5305 | |--- libraries/ #\u7b2c\u4e09\u65b9\u7c7b\u5e93 | |--- logs/ #\u65e5\u5fd7 | |--- models/ #\u6a21\u578b\u76ee\u5f55 | | |--- default/ #\u6309\u6570\u636e\u5e93\u8fde\u63a5\u540d\u5206\u5f00\uff0c\u81ea\u52a8\u751f\u6210Model\u6587\u4ef6 | | |--- fakes/ #\u4e3aModel\u521b\u5efa\u6f14\u793a\u6570\u636e | | | |--- User_fake.php | | |--- mixins/ #\u9644\u52a0\u5230Model\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u5916\u952e\u3001\u7f13\u5b58 | | |--- User_mixin.php | |--- themes/ #\u4e3b\u9898\u76ee\u5f55 | |--- default/ | |--- errors/ | | |--- error_404.php #404\u6a21\u677f | |--- layout.php #\u6a21\u677f\u5e03\u5c40 |--- static/ #\u9759\u6001\u6587\u4ef6 |--- composer.json #\u4f9d\u8d56\u7ba1\u7406\u7684\u914d\u7f6e\u6587\u4ef6 |--- ctl.sh #\u5b88\u62a4\u8fdb\u7a0b\u63a7\u5236\u811a\u672c |--- index.php #\u5165\u53e3\u6587\u4ef6","title":"\u76ee\u5f55\u7ed3\u6784"},{"location":"quick_start/#_3","text":"\u5f00\u53d1\u73af\u5883\u7684\u914d\u7f6e\u4f9d\u7136\u5728 application/config/development \u4e0b \u7b2c\u4e00\u6b21\u52a1\u5fc5\u4fee\u6539 constants.php \u4e2d\u7684\u7f51\u5740\u548c database.php \u4e2d\u7684\u6570\u636e\u5e93\u8fde\u63a5","title":"\u914d\u7f6e"},{"location":"quick_start/#model","text":"\u8bbe\u7f6e\u597d\u6570\u636e\u5e93\u8fde\u63a5\u540e\uff0c\u56de\u5230\u5b89\u88c5\u76ee\u5f55\uff08\u5373 application \u518d\u5f80\u4e0a\u4e00\u5c42\u76ee\u5f55\uff09\uff0c\u6267\u884c php index.php gen model #\u751f\u6210Model\u6587\u4ef6 php index.php gen fake #\u5199\u5165\u6f14\u793a\u6570\u636e \u81ea\u52a8\u751f\u6210\u6240\u6709\u8868\u7684 Model \u6587\u4ef6\uff0c\u653e\u5165\u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u540d\u7684\u5b50\u76ee\u5f55\u4e2d\uff0c\u5e76\u4e14\u5173\u8054\u5bf9\u5e94 Mixin \u3002","title":"\u751f\u6210Model"},{"location":"quick_start/#_4","text":"\u6309\u7167 CodeIgniter \u89c4\u8303\uff0c\u8bbf\u95ee\u7f51\u5740\u4f1a\u88ab\u5bf9\u5e94\u5230\u201c\u6a21\u5757/\u63a7\u5236\u5668/\u65b9\u6cd5\u201d\u4e0a\uff0c\u4f46\u5982\u679c\u63a7\u5236\u4e2d\u542b\u6709 _remap() \u65b9\u6cd5\uff0c\u5219\u76f4\u63a5\u6267\u884c\u5b83\u3002 \u6211\u4eec\u5728\u57fa\u7840\u63a7\u5236\u5668 application/core/MY_Controller.php \u4e2d\uff0c\u653e\u7f6e\u4e00\u4e2a _remap() \uff0c \u5b83\u7684\u6d41\u7a0b\u662f\u8fd9\u6837\uff1a \u6bcf\u4e2a\u63a7\u5236\u6709\u4e2a context \u7684\u5c5e\u6027\uff0c\u7c7b\u578b\u4e3a array \u3002 \u5982\u679c\u5bf9\u5e94\u7684\u65b9\u6cd5\u662f\u79c1\u6709\u6216\u8005\u4fdd\u62a4\u65b9\u6cd5\uff0c\u76f4\u63a5\u8fd4\u56de 404 \u9519\u8bef\uff0c\u5f53\u524d\u8bf7\u6c42\u7ed3\u675f\u3002 \u9996\u5148\u6267\u884c initialize() \u65b9\u6cd5\uff0c\u8fd4\u56de\u7ed3\u679c\u4f5c\u4e3a context \u4e00\u90e8\u5206\u3002\u540c\u65f6\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u83b7\u53d6\u4e0eURL\u76f8\u5173\u7684\u5c5e\u6027\uff0c\u6216\u68c0\u67e5\u5f53\u524d\u7528\u6237\u7684\u6743\u9650\u3002 \u63a5\u7740\u6267\u884c\u7f51\u5740\u4e2d\u5bf9\u5e94\u7684\u516c\u5f00\u65b9\u6cd5\uff0c\u67e5\u8be2\u6570\u636e\u5e93\u7b49\u64cd\u4f5c\u5728\u8fd9\u91cc\u5b9e\u73b0\uff0c\u5176\u7ed3\u679c\u4e5f\u662f context \u7684\u4e00\u90e8\u5206\u3002 \u6700\u540e\u6267\u884c finalize(\uff09\u8f93\u51fa\uff0c\u4f1a\u5148\u627e\u5230\u5bf9\u5e94\u6a21\u677f\u6587\u4ef6\uff0c\u518d\u7528 context \u4e2d\u6570\u636e\u6e32\u67d3\u6a21\u677f\u3002","title":"\u63a7\u5236\u5668\u6d41\u7a0b"},{"location":"quick_start/#_5","text":"\u5728 application/controllers \u4e2d\u52a0\u5165 demo \u5b50\u76ee\u5f55\u6765\u6d4b\u8bd5 \u521b\u5efa demo/Index_page.php \u6587\u4ef6 <?php defined ( 'BASEPATH' ) or exit ( 'No direct script access allowed' ); /** * \u6f14\u793a\u6a21\u5757\u7684\u9996\u9875\u63a7\u5236\u5668 */ class Index_page extends MY_Controller { public function index () { //\u4ee5 User \u548c Role \u4e3a\u4f8b $this -> load -> model ( 'default/user_model' ); $this -> load -> model ( 'default/role_model' ); $this -> user_model -> with_foreign ( 'role' ); $this -> user_model -> where ( 'role_id >' , 0 ); //\u81ea\u52a8\u4e3a\u6bcf\u4e2a user \u5e26\u4e0a role \u6210\u5458 $users = $this -> user_model -> all ( 5 ); if ( count ( $users ) > 0 ) { var_export ( $users [ 0 ]); var_export ( $users [ 0 ][ 'role' ]); } exit (); //\u7ed3\u675f\uff0c\u5426\u5219\u4f1a\u53bb\u6e32\u67d3\u5bf9\u5e94\u6a21\u677f } } \u5f53\u7136\u4e8b\u5148\u9700\u8981\u8bbe\u7f6e\u597d application/models/mixins/User_Mixin.php \u6587\u4ef6\uff0c \u8bbe\u7f6e\u597d\u4e0a\u9762\u6587\u4ef6\u540e\uff0c\u8981\u5220\u9664 User_model.php \u6587\u4ef6\uff0c\u7136\u540e\u7528 gen model \u547d\u4ee4\u91cd\u65b0\u751f\u6210\u3002 defined('BASEPATH') or exit('No direct script access allowed'); /** * \u7cfb\u7edf\u7528\u6237 */ trait User_mixin { use \\Mylib\\ORM\\MY_Foreign; public function get_relations() { return [ 'role' => [ //'type' => FOREIGN_BELONGS_TO, //\u53ef\u7701\u7565 'model' => 'default/role_model', ], ]; } } \u5bf9\u4e8e\u4e0a\u9762\u7684\u67e5\u8be2\u6765\u8bf4 Role_Mixin.php \u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u4e0d\u8fc7\u53cd\u5411\u7684\u5173\u8054\u9700\u8981\u3002 defined('BASEPATH') or exit('No direct script access allowed'); /** * \u7cfb\u7edf\u89d2\u8272 */ trait Role_mixin { use \\Mylib\\ORM\\MY_Foreign; public function get_relations() { return [ 'users' => [ //\u4e00\u5bf9\u591a\u5173\u8054 'type' => FOREIGN_HAS_MANY, 'model' => 'default/user_model', 'rev_name' => 'role', 'fkey' => 'role_id', ], 'privileges' => [ //\u591a\u5bf9\u591a\u5173\u8054 'type' => FOREIGN_MANY_TO_MANY, 'model' => 'default/privilege_model', 'rev_name' => 'roles', 'fkey' => 'role_id', 'another_fkey' => 'privilege_id', 'middle_model' => 'default/role_privilege_model', ], ]; } } \u7279\u6b8a\u7684\u81ea\u5173\u8054\uff0c\u5373\u6709\u4e9b\u884c\u662f\u53e6\u4e00\u4e9b\u884c\u7684 parent \uff0c\u7528\u7279\u6b8a\u5e38\u91cf\u4ee3\u66ff\u81ea\u8eab\u7684 Model \u540d\u3002 defined('BASEPATH') or exit('No direct script access allowed'); /** * \u540e\u53f0\u83dc\u5355 */ trait Menu_mixin { use \\Mylib\\ORM\\MY_Foreign; public function get_relations() { return [ 'parent' => [ 'model' => FOREIGN_SELF_MODEL, ], 'children' => [ 'type' => FOREIGN_HAS_MANY, 'model' => FOREIGN_SELF_MODEL, 'rev_name' => 'parent', 'fkey' => 'parent_id', ], ]; } }","title":"\u5173\u8054\u67e5\u8be2"},{"location":"quick_start/#_6","text":"\u4f7f\u7528 Model \u5230 redis \u7684\u7f13\u5b58\uff0c\u901a\u5e38\u662f hash \u6570\u636e\u7ed3\u6784\u3002 defined('BASEPATH') or exit('No direct script access allowed'); /** * \u7cfb\u7edf\u7528\u6237 */ trait User_mixin { use \\Mylib\\ORM\\MY_Cacheable; use \\Mylib\\ORM\\MY_Cache_Hash; use \\Mylib\\ORM\\MY_Foreign; public function __construct() { parent::__construct(); $this->add_cache('redis', 'admin'); } public function get_relations() { return [ 'role' => [ //'type' => FOREIGN_BELONGS_TO, //\u53ef\u7701\u7565 'model' => 'default/role_model', ], ]; } public function cache_type() { return 'hash'; } public function cache_key($condition) { return 'user:' . $condition['username']; } }","title":"\u6570\u636e\u7f13\u5b58"},{"location":"quick_start/#_7","text":"","title":"\u6811\u72b6\u7ed3\u6784\uff0c\u591a\u7ea7\u5206\u7c7b"},{"location":"quick_start/#_8","text":"","title":"\u6309\u6708\u5206\u8868"},{"location":"quick_start/#_9","text":"","title":"\u6a21\u677f"}]}